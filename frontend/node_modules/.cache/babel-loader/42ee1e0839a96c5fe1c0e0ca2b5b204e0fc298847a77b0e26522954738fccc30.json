{"ast":null,"code":"'use strict';\n\nvar _interopRequireWildcard = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n};\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar _Promise = require('bluebird');\nvar _Promise2 = _interopRequireWildcard(_Promise);\n\n/**\n*\n* Render html string by given tempate and data\n* Built-in template engine: ['swig']\n*\n* @param {String(Path)} [template] [the template abs path]\n* @param {Object} [data] [the template locals]\n* @param {Object} [engine] [the view engine's object, contains `engine.name`, `engine._engine`]\n*\n**/\n\nexports['default'] = function (template) {\n  var data = arguments[1] === undefined ? {} : arguments[1];\n  var opts = arguments[2] === undefined ? {\n    engine: 'swig'\n  } : arguments[2];\n  return new _Promise2['default'](function (res, rej) {\n    var engine = opts.engine;\n    try {\n      var _engine = require(engine);\n      var html;\n      if (engine === 'jade') html = _engine.renderFile(template, data);\n      if (engine === 'swig') html = _engine.compileFile(template)(data);\n      if (engine === 'ejs') html = _engine.render(require('fs').readFileSync(template), data);\n      if (!html) return rej(new Error('Template engine is not supported yet'));\n      // Errors come from view engine\n      if (typeof html === 'object') return rej(html);\n      res(html);\n    } catch (err) {\n      return rej(err);\n    }\n  });\n};\nmodule.exports = exports['default'];","map":{"version":3,"names":["template","data","arguments","undefined","opts","engine","_Promise2","res","rej","_engine","require","html","renderFile","compileFile","render","readFileSync","Error","err"],"sources":["E:\\programs\\AI programs\\AIMessageApp\\frontend\\node_modules\\pkghub-render\\libs\\compile.js"],"sourcesContent":["import Promise from 'bluebird'\n\n/**\n*\n* Render html string by given tempate and data\n* Built-in template engine: ['swig']\n*\n* @param {String(Path)} [template] [the template abs path]\n* @param {Object} [data] [the template locals]\n* @param {Object} [engine] [the view engine's object, contains `engine.name`, `engine._engine`]\n*\n**/\nexport default function(template, data = {}, opts = { engine: 'swig' }) {\n  return new Promise((res, rej) => {\n    const engine = opts.engine\n    \n    try {\n      const _engine = require(engine)\n      var html\n\n      if (engine === 'jade') \n        html = _engine.renderFile(template, data)\n      if (engine === 'swig') \n        html = _engine.compileFile(template)(data)\n      if (engine === 'ejs') \n        html = _engine.render(require('fs').readFileSync(template), data)\n\n      if (!html)\n        return rej(new Error('Template engine is not supported yet'))\n      // Errors come from view engine\n      if (typeof(html) === 'object')\n        return rej(html)\n\n      res(html)\n    } catch (err) {\n      return rej(err)\n    }\n  })\n}\n"],"mappings":";;;;;;;;;;uBAAoB,UAAU;;;;;;;;;;;;;;qBAYf,UAASA,QAAQ,EAAwC;MAAtCC,IAAI,GAAAC,SAAA,QAAAC,SAAA,GAAG,EAAE,GAAAD,SAAA;MAAEE,IAAI,GAAAF,SAAA,QAAAC,SAAA,GAAG;IAAEE,MAAM,EAAE;EAAM,CAAE,GAAAH,SAAA;EACpE,OAAO,IAAAI,SAAA,YAAY,UAACC,GAAG,EAAEC,GAAG,EAAK;IAC/B,IAAMH,MAAM,GAAGD,IAAI,CAACC,MAAM;IAE1B,IAAI;MACF,IAAMI,OAAO,GAAGC,OAAO,CAACL,MAAM,CAAC;MAC/B,IAAIM,IAAI;MAER,IAAIN,MAAM,KAAK,MAAM,EACnBM,IAAI,GAAGF,OAAO,CAACG,UAAU,CAACZ,QAAQ,EAAEC,IAAI,CAAC;MAC3C,IAAII,MAAM,KAAK,MAAM,EACnBM,IAAI,GAAGF,OAAO,CAACI,WAAW,CAACb,QAAQ,CAAC,CAACC,IAAI,CAAC;MAC5C,IAAII,MAAM,KAAK,KAAK,EAClBM,IAAI,GAAGF,OAAO,CAACK,MAAM,CAACJ,OAAO,CAAC,IAAI,CAAC,CAACK,YAAY,CAACf,QAAQ,CAAC,EAAEC,IAAI,CAAC;MAEnE,IAAI,CAACU,IAAI,EACP,OAAOH,GAAG,CAAC,IAAIQ,KAAK,CAAC,sCAAsC,CAAC,CAAC;;MAE/D,IAAI,OAAOL,IAAI,KAAM,QAAQ,EAC3B,OAAOH,GAAG,CAACG,IAAI,CAAC;MAElBJ,GAAG,CAACI,IAAI,CAAC;KACV,CAAC,OAAOM,GAAG,EAAE;MACZ,OAAOT,GAAG,CAACS,GAAG,CAAC;;GAElB,CAAC;CACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}