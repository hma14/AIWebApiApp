{"ast":null,"code":"'use strict';\n\nvar _interopRequireWildcard = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n};\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\n/**\n*\n* A wrapper function for rendering html string by given template and data,\n* Support mutilple view engines.\n*\n* @param {String} [template] [template's short name]\n* @example\n*   exports.render('mails-flat/message', {...});\n*\n**/\nexports['default'] = renderer;\nvar _pkghub = require('pkghub');\nvar _pkghub2 = _interopRequireWildcard(_pkghub);\nvar _Promise = require('bluebird');\nvar _Promise2 = _interopRequireWildcard(_Promise);\nvar _compile = require('./compile');\nvar _compile2 = _interopRequireWildcard(_compile);\nfunction renderer(template, data) {\n  var hub = new _pkghub2['default']();\n  return hub.load(template).then(function (_ref) {\n    var module = _ref.module;\n    var file = _ref.file;\n    if (!module) return _Promise2['default'].reject(new Error('Target theme module was not found'));\n    if (!module['view engine']) return _Promise2['default'].reject(new Error('Template engine in `package.json` was required'));\n    if (!file) return _Promise2['default'].reject(new Error('Template file was not found'));\n\n    // Select the first file when template file does not exist.\n    var dest = file.exist ? file.dir : file.availables[0];\n\n    // Inject `THEME` locals\n    data.THEME = module;\n    // Replace #{static} in template with real public path.\n    data['static'] = isURI(module['static']) ? module['static'] : '/' + module.name;\n    return _compile2['default'](dest, data, {\n      engine: module['view engine']\n    });\n  });\n}\nfunction isURI(dir) {\n  return dir && (dir.indexOf('http') === 0 || dir.indexOf('https') === 0);\n}\nmodule.exports = exports['default'];","map":{"version":3,"names":["renderer","template","data","hub","_pkghub2","load","then","_ref","module","file","_Promise2","reject","Error","dest","exist","dir","availables","THEME","isURI","name","_compile2","engine","indexOf"],"sources":["E:\\programs\\AI programs\\AIMessageApp\\frontend\\node_modules\\pkghub-render\\libs\\render.js"],"sourcesContent":["import pkghub from 'pkghub'\nimport Promise from 'bluebird'\nimport compile from './compile'\n\n/**\n*\n* A wrapper function for rendering html string by given template and data,\n* Support mutilple view engines.\n*\n* @param {String} [template] [template's short name]\n* @example\n*   exports.render('mails-flat/message', {...});\n*\n**/\nexport default function renderer(template, data) {\n  const hub = new pkghub\n\n  return hub.load(template)\n    .then(({ module, file }) => {\n      if (!module) \n        return Promise.reject(new Error('Target theme module was not found'))\n      if (!module['view engine']) \n        return Promise.reject(new Error('Template engine in `package.json` was required'))\n      if (!file) \n        return Promise.reject(new Error('Template file was not found'))\n\n      // Select the first file when template file does not exist.\n      const dest = file.exist ? file.dir : file.availables[0]\n\n      // Inject `THEME` locals\n      data.THEME = module\n      // Replace #{static} in template with real public path.\n      data.static = isURI(module.static) ? \n        module.static : \n        '/' + module.name;\n\n      return compile(dest, data, {\n        engine: module['view engine']\n      })\n    })\n}\n\nfunction isURI(dir) {\n  return dir && (dir.indexOf('http') === 0 || dir.indexOf('https') === 0)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;qBAcwBA,QAAQ;sBAdb,QAAQ;;uBACP,UAAU;;uBACV,WAAW;;AAYhB,SAASA,QAAQA,CAACC,QAAQ,EAAEC,IAAI,EAAE;EAC/C,IAAMC,GAAG,GAAG,IAAAC,QAAA,aAAU;EAEtB,OAAOD,GAAG,CAACE,IAAI,CAACJ,QAAQ,CAAC,CACtBK,IAAI,CAAC,UAAAC,IAAA,EAAsB;QAAnBC,MAAM,GAAAD,IAAA,CAANC,MAAM;QAAEC,IAAI,GAAAF,IAAA,CAAJE,IAAI;IACnB,IAAI,CAACD,MAAM,EACT,OAAOE,SAAA,YAAQC,MAAM,CAAC,IAAIC,KAAK,CAAC,mCAAmC,CAAC,CAAC;IACvE,IAAI,CAACJ,MAAM,CAAC,aAAa,CAAC,EACxB,OAAOE,SAAA,YAAQC,MAAM,CAAC,IAAIC,KAAK,CAAC,gDAAgD,CAAC,CAAC;IACpF,IAAI,CAACH,IAAI,EACP,OAAOC,SAAA,YAAQC,MAAM,CAAC,IAAIC,KAAK,CAAC,6BAA6B,CAAC,CAAC;;;IAGjE,IAAMC,IAAI,GAAGJ,IAAI,CAACK,KAAK,GAAGL,IAAI,CAACM,GAAG,GAAGN,IAAI,CAACO,UAAU,CAAC,CAAC,CAAC;;;IAGvDd,IAAI,CAACe,KAAK,GAAGT,MAAM;;IAEnBN,IAAI,UAAO,GAAGgB,KAAK,CAACV,MAAM,UAAO,CAAC,GAChCA,MAAM,UAAO,GACb,GAAG,GAAGA,MAAM,CAACW,IAAI;IAEnB,OAAOC,SAAA,YAAQP,IAAI,EAAEX,IAAI,EAAE;MACzBmB,MAAM,EAAEb,MAAM,CAAC,aAAa;KAC7B,CAAC;GACH,CAAC;;AAGN,SAASU,KAAKA,CAACH,GAAG,EAAE;EAClB,OAAOA,GAAG,KAAKA,GAAG,CAACO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAIP,GAAG,CAACO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}